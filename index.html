<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Break Time - Pomodoro Timer</title>
    <style>
        /* 
        * VARIABEL CSS UNTUK WARNA DAN TEMA
        * Menggunakan sistem warna yang modern dengan gradient
        */
        :root {
            --primary-color: #2b5876;
            --secondary-color: #4e4376;
            --dark-color: #1a1a2e;
            --light-color: #16213e;
            --accent-color: #f9a828;  /* Warna aksen oranye untuk highlight */
            --text-color: #e6e6e6;    /* Warna teks utama */
        }
        
        /* RESET CSS DASAR */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* 
        * STYLE UTAMA BODY
        * Menggunakan gradient background dan transition untuk efek smooth
        */
        body { 
            background-color: var(--light-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: background-color 0.5s ease;
            background-image: linear-gradient(to right top, #16213e, #1a1a2e);
        }
        
        /* 
        * CONTAINER UTAMA
        * Menggunakan backdrop-filter untuk efek glassmorphism
        * Border dan shadow untuk depth
        */
        .container {
            width: 90%;
            max-width: 500px;
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background-color: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);  /* Efek blur modern */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* HEADER UTAMA */
        h1 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        /* 
        * TOGGLE MODE (WORK/SHORT BREAK/LONG BREAK)
        * Desain tombol dengan transition dan active state
        */
        .mode-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
            gap: 10px;
        }
        
        .mode-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        
        .mode-btn.active {
            background-color: var(--accent-color);
            color: var(--dark-color);
            box-shadow: 0 0 15px rgba(249, 168, 40, 0.5);
        }
        
        /* 
        * TIMER DISPLAY
        * Font monospace untuk tampilan timer yang konsisten
        */
        .timer-container {
            position: relative;
            margin: 1.5rem 0;
        }
        
        .timer {
            font-size: 5rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;  /* Font fixed-width */
            color: var(--text-color);
            position: relative;
            z-index: 2;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        
        /* 
        * TOMBOL KONTROL (START/PAUSE/RESET)
        * Desain tombol dengan efek hover dan active
        */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Tombol utama (Start/Pause) */
        .btn-primary {
            background-color: var(--accent-color);
            color: var(--dark-color);
            box-shadow: 0 4px 0 rgba(201, 134, 24, 0.8);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 rgba(201, 134, 24, 0.8);
        }
        
        .btn-primary:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 rgba(201, 134, 24, 0.8);
        }
        
        /* Tombol sekunder (Reset) */
        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* State disabled untuk tombol */
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* 
        * PANEL SETTINGS
        * Animasi fadeIn untuk transisi smooth
        */
        .settings {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Tombol settings dengan efek rotate */
        .settings-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .settings-btn:hover {
            transform: rotate(90deg);
        }
        
        /* Panel settings yang bisa di-toggle */
        .settings-panel {
            display: none;
            margin-top: 1rem;
            animation: fadeIn 0.3s ease;
        }
        
        .settings-panel.show {
            display: block;
        }
        
        /* Form group untuk input settings */
        .form-group {
            margin-bottom: 1rem;
            text-align: left;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--accent-color);
        }
        
        input[type="number"] {
            width: 100%;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            color: var(--text-color);
        }
        
        /* Tombol save settings */
        .save-btn {
            background-color: var(--accent-color);
            color: var(--dark-color);
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 0.5rem;
        }
        
        /* 
        * MODAL BREAK TIME
        * Tampilan modal saat timer selesai
        */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal {
            background-color: var(--dark-color);
            padding: 2rem;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            border: 2px solid var(--accent-color);
            box-shadow: 0 0 30px rgba(249, 168, 40, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.show .modal {
            transform: scale(1);
        }
        
        /* Animasi untuk ikon kopi */
        .coffee-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: inline-block;
            animation: sway 3s infinite ease-in-out;
            transform-origin: bottom center;
        }
        
        @keyframes sway {
            0%,
            100% {
                transform: rotate(-10deg);
            }
            50% {
                transform: rotate(10deg);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        /* 
        * THEME BERDASARKAN MODE
        * Work mode dan break mode memiliki background berbeda
        */
        body.work-mode {
            background-image: linear-gradient(to right top, #16213e, #1a1a2e);
        }
        
        body.break-mode {
            background-image: linear-gradient(to right top, #1a2a3a, #0f1a23);
        }
        
        /* 
        * RESPONSIVE DESIGN
        * Penyesuaian untuk mobile devices
        */
        @media (max-width: 480px) {
            .timer {
                font-size: 3.5rem;
            }
            .controls {
                flex-direction: column;
                align-items: center;
            }
            .btn {
                width: 100%;
            }
        }
    </style>
</head>

<body class="work-mode">
    <div class="container">
        <h1>Break Time</h1>

        <div class="mode-selector">
            <button class="mode-btn active" id="pomodoro-btn">Work</button>
            <button class="mode-btn" id="short-break-btn">Short Break</button>
            <button class="mode-btn" id="long-break-btn">Long Break</button>
        </div>

        <div class="timer-container">
            <div class="timer" id="timer">25:00</div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="start-btn">Start</button>
            <button class="btn btn-secondary" id="reset-btn" disabled>Reset</button>
        </div>

        <div class="settings">
            <button class="settings-btn" id="settings-btn">⚙️</button>
            <div class="settings-panel" id="settings-panel">
                <div class="form-group">
                    <label for="pomodoro-time">Work Time (minutes)</label>
                    <input type="number" id="pomodoro-time" min="1" max="60" value="25">
                </div>
                <div class="form-group">
                    <label for="short-break-time">Short Break (minutes)</label>
                    <input type="number" id="short-break-time" min="1" max="30" value="5">
                </div>
                <div class="form-group">
                    <label for="long-break-time">Long Break (minutes)</label>
                    <input type="number" id="long-break-time" min="1" max="60" value="15">
                </div>
                <button class="save-btn" id="save-settings-btn">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Modal yang muncul saat timer selesai -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="coffee-icon">☕</div>
            <h2>Ngopi Dulu Bro!</h2>
            <p id="random-quote">"Take a break to sharpen your axe."</p>
            <button class="modal-btn" id="modal-btn">Lanjut!</button>
        </div>
    </div>

    <script>
        // =============================================
        // INISIALISASI ELEMEN DOM
        // =============================================
        const timerDisplay = document.getElementById('timer');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const pomodoroBtn = document.getElementById('pomodoro-btn');
        const shortBreakBtn = document.getElementById('short-break-btn');
        const longBreakBtn = document.getElementById('long-break-btn');
        const settingsBtn = document.getElementById('settings-btn');
        const settingsPanel = document.getElementById('settings-panel');
        const saveSettingsBtn = document.getElementById('save-settings-btn');
        const pomodoroTimeInput = document.getElementById('pomodoro-time');
        const shortBreakTimeInput = document.getElementById('short-break-time');
        const longBreakTimeInput = document.getElementById('long-break-time');
        const modalOverlay = document.getElementById('modal-overlay');
        const modalBtn = document.getElementById('modal-btn');
        const randomQuoteElement = document.getElementById('random-quote');
        const body = document.body;

        // =============================================
        // VARIABEL UTAMA TIMER
        // =============================================
        let timer;
        let timeLeft = 25 * 60; // 25 menit dalam detik
        let isRunning = false;
        let currentMode = 'pomodoro'; // 'pomodoro', 'shortBreak', 'longBreak'
        let pomodoroCount = 0; // Menghitung berapa kali pomodoro selesai

        // =============================================
        // DATABASE QUOTE UNTUK BREAK TIME
        // =============================================
        const quotes = [
            "Produktivitas bukanlah kebetulan. Itu hasil dari komitmen pada keunggulan.",
            "Jaga tubuhmu. Itu satu-satunya tempat yang kamu miliki untuk hidup.",
            "Terkadang hal paling produktif yang bisa kamu lakukan adalah bersantai.",
            "Istirahatlah saat lelah. Segarkan dan perbarui dirimu, tubuhmu, pikiranmu, semangatmu.",
            "Hampir semua akan bekerja lagi jika kamu mencabutnya beberapa menit, termasuk dirimu.",
            "Ada kebajikan dalam bekerja dan ada kebajikan dalam istirahat. Gunakan keduanya.",
            "Waktu untuk bersantai adalah ketika kamu tidak punya waktu untuk itu.",
            "Istirahat yang baik adalah setengah dari pekerjaan.",
            "Jangan bingung antara memiliki karier dengan memiliki kehidupan.",
            "Istirahatlah untuk mengasah kapakmu.",
            "Kopi dulu, baru taklukkan dunia.",
            "Kerja keras itu penting, tapi beristirahat juga penting.",
            "Kamu tidak bisa menuangkan dari cangkir kosong. Jaga dirimu dulu.",
            "Kesuksesan adalah mendapatkan apa yang kamu inginkan. Kebahagiaan adalah menginginkan apa yang kamu dapatkan.",
            "Kuncinya bukan memprioritaskan apa yang ada di jadwalmu, tapi menjadwalkan prioritasmu."
        ];

        // =============================================
        // PENGATURAN DEFAULT
        // =============================================
        let settings = {
            pomodoroTime: 25,
            shortBreakTime: 5,
            longBreakTime: 15
        };

        // =============================================
        // FUNGSI INISIALISASI APLIKASI
        // =============================================
        function init() {
            loadSettings();
            updateTimerDisplay();
            setupEventListeners();
        }

        // =============================================
        // FUNGSI LOAD SETTINGS DARI LOCALSTORAGE
        // =============================================
        function loadSettings() {
            const savedSettings = localStorage.getItem('pomodoroSettings');
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                pomodoroTimeInput.value = settings.pomodoroTime;
                shortBreakTimeInput.value = settings.shortBreakTime;
                longBreakTimeInput.value = settings.longBreakTime;
            }
        }

        // =============================================
        // FUNGSI SAVE SETTINGS KE LOCALSTORAGE
        // =============================================
        function saveSettings() {
            // Validasi input tidak boleh kosong
            if (!pomodoroTimeInput.value || !shortBreakTimeInput.value || !longBreakTimeInput.value) {
                showAlert('Harap isi semua field pengaturan!');
                return;
            }

            settings = {
                pomodoroTime: parseInt(pomodoroTimeInput.value),
                shortBreakTime: parseInt(shortBreakTimeInput.value),
                longBreakTime: parseInt(longBreakTimeInput.value)
            };
            localStorage.setItem('pomodoroSettings', JSON.stringify(settings));
            switchMode(currentMode); // Update timer dengan pengaturan baru
            
            // Tampilkan notifikasi sukses
            showAlert('Pengaturan berhasil disimpan!', 'success');
        }

        // =============================================
        // FUNGSI SETUP EVENT LISTENERS
        // =============================================
        function setupEventListeners() {
            startBtn.addEventListener('click', toggleTimer);
            resetBtn.addEventListener('click', resetTimer);
            pomodoroBtn.addEventListener('click', () => switchMode('pomodoro'));
            shortBreakBtn.addEventListener('click', () => switchMode('shortBreak'));
            longBreakBtn.addEventListener('click', () => switchMode('longBreak'));
            settingsBtn.addEventListener('click', toggleSettings);
            saveSettingsBtn.addEventListener('click', saveSettings);
            modalBtn.addEventListener('click', closeModal);
        }

        // =============================================
        // FUNGSI TOGGLE TIMER (START/PAUSE)
        // =============================================
        function toggleTimer() {
            if (isRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        }

        // =============================================
        // FUNGSI START TIMER
        // =============================================
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                startBtn.textContent = 'Pause';
                resetBtn.disabled = false;

                timer = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();

                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        timerComplete();
                    }
                }, 1000);
            }
        }

        // =============================================
        // FUNGSI PAUSE TIMER
        // =============================================
        function pauseTimer() {
            if (isRunning) {
                clearInterval(timer);
                isRunning = false;
                startBtn.textContent = 'Resume';
            }
        }

        // =============================================
        // FUNGSI RESET TIMER
        // =============================================
        function resetTimer() {
            clearInterval(timer);
            isRunning = false;
            startBtn.textContent = 'Start';
            resetBtn.disabled = true;
            switchMode(currentMode); // Reset ke waktu awal mode saat ini
        }

        // =============================================
        // FUNGSI SWITCH MODE (WORK/SHORT BREAK/LONG BREAK)
        // =============================================
        function switchMode(mode) {
            currentMode = mode;

            // Update tombol aktif
            pomodoroBtn.classList.remove('active');
            shortBreakBtn.classList.remove('active');
            longBreakBtn.classList.remove('active');

            // Set waktu berdasarkan mode
            switch (mode) {
                case 'pomodoro':
                    timeLeft = settings.pomodoroTime * 60;
                    pomodoroBtn.classList.add('active');
                    body.className = 'work-mode';
                    break;
                case 'shortBreak':
                    timeLeft = settings.shortBreakTime * 60;
                    shortBreakBtn.classList.add('active');
                    body.className = 'break-mode';
                    break;
                case 'longBreak':
                    timeLeft = settings.longBreakTime * 60;
                    longBreakBtn.classList.add('active');
                    body.className = 'break-mode';
                    break;
            }

            updateTimerDisplay();

            // Reset state timer
            clearInterval(timer);
            isRunning = false;
            startBtn.textContent = 'Start';
            resetBtn.disabled = true;
        }

        // =============================================
        // FUNGSI KETIKA TIMER SELESAI
        // =============================================
        function timerComplete() {
            isRunning = false;
            startBtn.textContent = 'Start';
            resetBtn.disabled = true;

            // Mainkan suara alarm (acak dari beberapa pilihan)
            playRandomAlarmSound();

            // Tampilkan modal dengan quote acak
            showModal();

            // Update pomodoro count
            if (currentMode === 'pomodoro') {
                pomodoroCount++;
            }
        }

        // =============================================
        // FUNGSI TAMPILKAN MODAL BREAK TIME
        // =============================================
        function showModal() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            randomQuoteElement.textContent = `"${randomQuote}"`;
            modalOverlay.classList.add('show');
        }

        // =============================================
        // FUNGSI TUTUP MODAL
        // =============================================
        function closeModal() {
            modalOverlay.classList.remove('show');

            // Tentukan mode berikutnya setelah tutup modal
            if (currentMode === 'pomodoro') {
                if (pomodoroCount % 4 === 0) {
                    switchMode('longBreak');
                } else {
                    switchMode('shortBreak');
                }
            } else {
                switchMode('pomodoro');
            }
        }

        // =============================================
        // FUNGSI UPDATE TAMPILAN TIMER
        // =============================================
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // =============================================
        // FUNGSI TOGGLE SETTINGS PANEL
        // =============================================
        function toggleSettings() {
            settingsPanel.classList.toggle('show');
        }

        // =============================================
        // FUNGSI MAINKAN SUARA ALARM (RANDOM)
        // =============================================
        function playRandomAlarmSound() {
            // Beberapa pilihan suara alarm
            const alarmSounds = [
                'https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3',
                'https://assets.mixkit.co/sfx/preview/mixkit-classic-alarm-995.mp3',
                'https://assets.mixkit.co/sfx/preview/mixkit-alarm-tone-996.mp3',
                'https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3'
            ];
            
            // Pilih suara secara acak
            const randomSound = alarmSounds[Math.floor(Math.random() * alarmSounds.length)];
            const audio = new Audio(randomSound);
            audio.play();
        }

        // =============================================
        // FUNGSI TAMPILKAN ALERT (SWEETALERT STYLE)
        // =============================================
        function showAlert(message, type = 'error') {
            // Buat elemen alert
            const alert = document.createElement('div');
            alert.style.position = 'fixed';
            alert.style.top = '20px';
            alert.style.right = '20px';
            alert.style.padding = '15px 25px';
            alert.style.borderRadius = '5px';
            alert.style.color = 'white';
            alert.style.fontWeight = '600';
            alert.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            alert.style.zIndex = '1000';
            alert.style.animation = 'fadeIn 0.3s ease';
            alert.textContent = message;
            
            // Set warna berdasarkan type
            if (type === 'success') {
                alert.style.backgroundColor = '#4BB543'; // Hijau
            } else {
                alert.style.backgroundColor = '#FF3333'; // Merah
            }
            
            // Tambahkan ke body
            document.body.appendChild(alert);
            
            // Hilangkan setelah 3 detik
            setTimeout(() => {
                alert.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(alert);
                }, 300);
            }, 3000);
        }

        // =============================================
        // INISIALISASI APLIKASI
        // =============================================
        init();
    </script>
</body>

</html>